lstoff

; Standard Z88 Operating System manifests:

; Director/CLI low level access:

     DEFC Dc_Alt = $1A0C           ; Pass an alternative character
     DEFC Dc_Bye = $080C           ; Exiting current application (internal)
     DEFC Dc_Ent = $0A0C           ; Enter new application (internal)
     DEFC Dc_Gen = $200C           ; Screen driver call (internal)
     DEFC Dc_Icl = $140C           ; Invoke new CLI
     DEFC Dc_In  = $0E0C           ; Read from CLI (internal)
     DEFC Dc_Ini = $060C           ; Initialize the Director (internal)
     DEFC Dc_Nam = $0C0C           ; Name current application
     DEFC Dc_Nq  = $160C           ; Handle Director/CLI enquiries (internal)
     ; arguments
          DEFC DQ_Dev    = $00     ; Get default device
          DEFC DQ_Dir    = $03     ; Get default directory
          DEFC DQ_Fnm    = $06     ; Get filename match string
          DEFC DQ_Dmh    = $09     ; Get the director memory handle
          DEFC DQ_Inp    = $0C     ; *** NQ_Ihn link (IX=$0006 always)
          DEFC DQ_Out    = $0F     ; *** NQ_Ohn link (IX=$0007 always)
          DEFC DQ_Prt    = $12     ; *** NQ_Phn link (IX=$0003 always)
          DEFC DQ_Tin    = $15     ; Get input-T handle
          DEFC DQ_Tot    = $18     ; Get output-T handle
          DEFC DQ_Tpr    = $1B     ; Get printer-T handle
          DEFC DQ_Chn    = $1E     ; Reset serial port and get NQ_Chn

     DEFC Dc_Out = $100C           ; Write to CLI (internal)
     DEFC Dc_Pol = $220C           ; Poll for card usage (internal)
     DEFC Dc_Prt = $120C           ; Print to CLI (internal)

     DEFC Dc_Rbd = $1C0C           ; Rebind streams
     ; arguments:
          DEFC RB_IN = $00         ; input stream - new source of input
          DEFC RB_OUT = $01        ; output stream - new destination for output
          DEFC RB_PRT = $02        ; printer stream - new destination for output
          DEFC RB_INT = $03        ; input stream T - copy of input
          DEFC RB_OPT = $04        ; output stream T - copy of output
          DEFC RB_PTT = $05        ; printer stream T -  copy of output

     DEFC Dc_Scn = $240C           ; Scan for card usage (internal)
     DEFC Dc_Sp  = $180C           ; Handle Director/CLI settings (internal)

     DEFC Dc_Xin = $1E0C           ; Examine CLI input (internal)

     DEFC Os_Use = $EE06           ; Fetch information about process card usage (internal)
     DEFC Os_Bye = $21             ; Application exit.
     DEFC Os_Exit= $F606           ; Quit process (internal)
     DEFC Os_Ent = $FA06           ; Enter an application (internal)

     DEFC Os_Cli = $84             ; CLI interface (internal)
     ; arguments:
          DEFC CL_RIM = $01        ; get raw input
          DEFC CL_MBC = $02        ; meta/base to character conversion
          DEFC CL_CMB = $03        ; character to meta/base conversion
          DEFC CL_INC = $04        ; increment CLI use count
          DEFC CL_DEC = $05        ; decrement CLI use count
          DEFC CL_RES = $06        ; reset CLI use count
          DEFC CL_ACK = $07        ; acknowledge CLI/Escape
          DEFC CLM_SH = $01        ; SHIFT key (bit) mask
          DEFC CLM_CT = $02        ; DIAMOND (bit) mask

     DEFC Os_Dom = $FE06           ; Open director memory (internal)
     DEFC Os_Poll= $FC06           ; Poll for an application (internal)
     DEFC Os_Stk = $F806           ; Stack file current process (internal)
     DEFC Os_Wait= $7E             ; Wait for event (internal)
     ; arguments:
          DEFC WT_ANY = $FF        ; infinite



; *** INTERNAL OPERATING SYSTEM USAGE ONLY ***

; Index internal flags:

     defc IDXF1_INSIDEOZ = $01     ; inside OS_In
     defc IDXF1_INIT     = $02     ; need init

     defc IDXF1_B_INSIDEOZ = 0
     defc IDXF1_B_INIT     = 1

lston

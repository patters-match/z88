lstoff

; **************************************************************************************************
; Standard Z88 Operating System Manifests
;
; This file is part of the Z88 operating system, OZ      0000000000000000      ZZZZZZZZZZZZZZZZZZZ
;                                                       000000000000000000   ZZZZZZZZZZZZZZZZZZZ
; OZ is free software; you can redistribute it and/    0000            0000              ZZZZZ
; or modify it under the terms of the GNU General      0000            0000            ZZZZZ
; Public License as published by the Free Software     0000            0000          ZZZZZ
; Foundation; either version 2, or (at your option)    0000            0000        ZZZZZ
; any later version. OZ is distributed in the hope     0000            0000      ZZZZZ
; that it will be useful, but WITHOUT ANY WARRANTY;    0000            0000    ZZZZZ
; without even the implied warranty of MERCHANTA-       000000000000000000   ZZZZZZZZZZZZZZZZZZZZ
; BILITY or FITNESS FOR A PARTICULAR PURPOSE. See        0000000000000000  ZZZZZZZZZZZZZZZZZZZZ
; the GNU General Public License for more details.
; You should have received a copy of the GNU General Public License along with OZ; see the file
; COPYING. If not, write to:
;                                  Free Software Foundation, Inc.
;                                  59 Temple Place-Suite 330,
;                                  Boston, MA 02111-1307, USA.
;
; (C) Jorma Oksanen (jorma.oksanen@aini.fi), 2003
; (C) Thierry Peycru (pek@users.sf.net), 2005-2007
; (C) Gunther Strube (gbs@users.sf.net), 2005-2007
;
; ***************************************************************************************************

; ***************************************************************************************************
; ***                             INTERNAL OPERATING SYSTEM USAGE ONLY                            ***
; ***************************************************************************************************

; Handle functions:

IF !__HANDLE_DEF__
define __HANDLE_DEF__

defc    Os_Fn                   =$7B            ; Miscellaneous OS functions (internal)

; OS_Fn reasons:
defc    FN_AH                   =$01            ; allocate handle
defc    FN_VH                   =$02            ; verify handle
defc    FN_FH                   =$03            ; free handle

; Tri-handle calls:
defc    Os_Fth                  =$DE06          ; Free tri-handle (internal)
defc    Os_Gth                  =$E206          ; Allocate tri-handle (internal)
defc    Os_Vth                  =$E006          ; Verify tri-handle (internal)

; Tri-handle subtypes:
defc    TH_FILT                 =$F0            ; filter
defc    TH_WMG                  =$F1            ; wildcard
defc    TH_ALM                  =$F2            ; alarm

; Structure:
defc    NUMHANDLES              = 64            ; 96 handles starting at 'Handles' in sysvar.def
defc    hnd_SIZEOF              = 16            ; each handle is 16 bytes length

; handle types:
defc    HND_DEV                 =$01           ; device
defc    HND_FILE                =$02           ; file/directory
defc    HND_MEM                 =$03           ; memory
defc    HND_PROC                =$04           ; process
defc    HND_ALRM                =$05           ; alarm
defc    HND_TRHN                =$06           ; tri-handle
defc    HND_TEMP                =$FA           ; temporary

defc    HND_B_DEV               =0

; generic handle:
defc    hnd_Next                =$00            ; 00-03 always same
defc    hnd_Type                =$02
defc    hnd_DynID               =$03
defc    hnd_Flags               =$0a            ; 0A-0D semi-standard
defc    hnd_L                   =$0b
defc    hnd_H                   =$0c
defc    hnd_Bank                =$0d

; device handle:
defc    dhnd_flags              =$0A
defc    dhnd_DOR                =$0B
defc    dhnd_DORH               =$0C
defc    dhnd_DORBank            =$0D
defc    dhnd_AppSlot            =$0E
defc    dhnd_DeviceID           =$0F

; file handle:
defc    fhnd_firstblk           =$04
defc    fhnd_firstblk_h         =$05
defc    fhnd_filepos            =$06
defc    fhnd_filepos_h          =$07
defc    fhnd_filepos_lo         =$08
defc    fhnd_attr               =$09
defc    fhnd_flags              =$0a
defc    fhnd_Bank               =$0d

defc    FATR_B_READABLE         =0
defc    FATR_B_WRITABLE         =1
defc    FATR_B_MEMORY           =2

defc    FATR_READABLE           =$01
defc    FATR_WRITABLE           =$02
defc    FATR_MEMORY             =$04
defc    FATR_SLOT               =$18            ; two bits

defc    FFLG_B_SPECDEV          =1
defc    FFLG_B_WRERROR          =2

defc    FSBLOCK_SIZE            =$3e

; MemHandle:
defc    mhnd_AllocFlags         =$04            ; flags used in OS_Mop
defc    mhnd_ExclusiveBank      =$05
defc    mhnd_Slot0              =$08            ; PageN of first allocation for each slot
defc    mhnd_Slot1              =$0A
defc    mhnd_Slot2              =$0C
defc    mhnd_Slot3              =$0E

; Process handle:
defc    phnd_Khn                =$01            ; keyboard handle
defc    phnd_Shn                =$02            ; screen handle
defc    phnd_Phn                =$03            ; indirect printer handle
defc    phnd_Nhn                =$04            ; null handle
defc    phnd_Com                =$05            ; Comms handle
defc    phnd_Ihn                =$06            ; IN handle
defc    phnd_Ohn                =$07            ; OUT handle
defc    phnd_Rhn                =$08            ; direct printer handle

; alarm handle:
defc    ahnd_NextAlarmL         =$04
defc    ahnd_NextAlarmH         =$05
defc    ahnd_Flags              =$06
defc    ahnd_Date               =$07
defc    ahnd_DateM              =$08
defc    ahnd_DateH              =$09
defc    ahnd_Time               =$0A
defc    ahnd_TimeM              =$0B
defc    ahnd_TimeH              =$0C
defc    ahnd_Func               =$0D            ; BHL

defc    AHNF_B_ACTIVE           =7

; TriHandle:
defc    thnd_Segment            =$04
defc    thnd_AddrH              =$05
defc    thnd_Bank               =$06
defc    thnd_SubType            =$07

ENDIF

lston

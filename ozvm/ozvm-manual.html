<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <meta http-equiv="CONTENT-TYPE"
 content="text/html; charset=iso-8859-1">
  <title>OZvm User Manual</title>
  <meta name="GENERATOR" content="OpenOffice.org 1.1.0  (Linux)">
  <meta name="CREATED" content="20040122;15363100">
  <meta name="CHANGED" content="20040123;16322000">
  <style>
	<!--
		@page { size: 21.59cm 27.94cm }
	-->
	</style>
</head>
<body style="direction: ltr;" lang="da-DK">
<p style="margin-bottom: 0cm;" align="center"><b><font size="4">User
Manual for OZvm V0.3.5</font></b> </p>
<p style="margin-bottom: 0cm;" align="left"><br>
</p>
<hr>
<p align="left"><br>
<b><font style="font-size: 13pt;" size="3">Contents</font></b></p>
<ol>
  <li>
    <p style="margin-bottom: 0cm;" align="left"><a href="#Introduction">Introduction</a>
    </p>
  </li>
  <li>
    <p style="margin-bottom: 0cm;" align="left"><a href="#Requirements">Requirements</a>
    </p>
  </li>
  <li>
    <p style="margin-bottom: 0cm;" align="left"><a
 href="#Getting_started">Getting started</a> </p>
  </li>
  <li>
    <p style="margin-bottom: 0cm;" align="left"><a href="#PC_Keyboard">PC
keyboard access in Z88</a> </p>
  </li>
  <li>
    <p style="margin-bottom: 0cm;" align="left"><a
 href="#Cmdline_options">Command line options</a></p>
  </li>
  <li>
    <p style="margin-bottom: 0cm;" align="left"><a
 href="#Debugging_mode">Debugging mode</a> </p>
  </li>
  <li>
    <p style="margin-bottom: 0cm;" align="left"><a href="#Features">Upcoming
features in future releases</a></p>
  </li>
  <li>
    <p align="left"><a href="#Not_working">What's not working (yet) in
Ozvm</a></p>
  </li>
</ol>
<p style="margin-bottom: 0cm;" align="left"><br>
</p>
<hr>
<p align="left"><a name="Introduction"></a><font
 style="font-size: 13pt;" size="3"><b>Introduction</b></font></p>
<p align="left">First of all, welcome to the OZvm world! OZvm is a Z88
virtual machine or emulator, using the Java virtual machine (JVM) to
get it running. Java was chosen for its marvellous cross platform
capabilities and to be able to install Java applications to the
Desktop from the web (using the WebStart feature). OZvm has been born
out of the need to debug Z88 applications and to continue development
of the Z88 operating system, "OZ". All our work with OZvm
and new OZ operating system are freely available under the Gnu Public
License, and can be downloaded from <a href="http://z88.sf.net/">http://z88.sf.net</a>.<br>
<br>
OZvm
is also an attempt to document the Z88 for historical purposes. Since
this computer is out of production, the company no longer exists,
only a single supplier is available (<a href="http://www.rakewell.com/">http://www.rakewell.com</a>),
and probably only a few thousand people still use it actively, it's
about time to establish a "Hall of Fame" for our beloved
portable before it will be forgotten. Using OZvm, you can have a go
at playing with the computer and it's embedded software, and even
develop new software for it! We have all the tools; cross assembler
&amp;
linker, debugging environment (OZvm!) and Eprom programming hardware
(the Z88!).<br>
<br>
Z88 is a lesser known portable made in 1987 by
Cambridge Computer Ltd (CC) in England. CC was established by Sir
Clive Sinclair of ZX Spectrum fame. The computer was sold worldwide,
and has been produced in approx. 30.000 units. Today (2004) maybe a
few thousand users still enjoy using it for their daily tasks. You
can read a lot about the Z88 on Garry Lancasters web site, dedicated
to Z88: <a href="http://www.zxplus3e.plus.com/z88forever/">http://www.zxplus3e.plus.com/z88forever/</a>.
There, you will find a lot other other useful links and information. </p>
<p align="left">If you're not familiar with
the Z88, we suggest that you visit Garry's site first and read about
the computer. This document requires a fair amount of knowledge about
how the Z88 works on both the hardware and software
side.<br>
<br>
<br>
<span style="font-size: 13pt;"><a name="Requirements"></a></span><b><font
 style="font-size: 13pt;" size="3">Requirements</font></b></p>
<p align="left">OZvm just needs Java
Runtime Environment (JRE) V1.4.x, or if you're going to compile Java
programs your self, the Java Development Kit (JDK) V1.4.x. OZvm does
not run on older versions like V1.3 or less.<br>
<br>
If you haven't
already installed it, then grab it from
<a href="http://java.sun.com/j2se/index.jsp">http://java.sun.com/j2se/index.jsp</a>.
Please use Sun's installation guides for properly installing and
configuring Java. If you're a Linux user, you can can download an
optimized Java engine with better KDE and Gnome integration at
<a href="http://www.blackdown.org/">http://www.blackdown.org</a>.
Java V1.4.x is bundled with Mac OSX, you lucky guys! There's no Java
V1.4 for Mac OS V9 and earlier; sorry, you can't run OZvm on those
boxes!<br>
<br>
OZvm needs approx. a 400Mhz Intel processor to get an
execution speed that matches the look and feel of a real Z88, and
uses about 20Mb RAM when executing (remember, this amount includes
the JVM engine as well). We recommend 128MB RAM computer systems or
more, so that the operating system has resources for other tasks than
just OZvm. Using faster computers just executes the Z88 better.<br>
<br>
You
can run OZvm on slower Intel systems. However, the Z80 execution
engine inside OZvm might not perform the speed equivalent of the
original Z80 processor (<span style="">3.2768 Mhz</span>)
of the real Z88, so you might experience a "slow" running
Z88. We haven't tested OZvm on other processor architectures like
PowerPC (the Mac computers), or Sun's SPARC, so we don't know how
OZvm performs on those boxes.<br>
<br>
The OZvm application behaves
well your operating system. It typically uses 5% or less processing
power of your computer in idle state (waiting for keyboard input),
and 10-20% when processing actual Z80 machine code.<br>
<br>
<br>
<span style="font-size: 13pt;"><a name="Getting_started"></a></span><b><font
 style="font-size: 13pt;" size="3">Getting
started</font></b></p>
<p align="left">The easiest way is just to double-click on the z88.jar
file in your favorite File Browser. You usually can do this since the
Java installer makes sure to bind JAR files to the JRE. You can also
start OZvm from the command line shell:</p>
<p style="margin-left: 1.13cm; margin-bottom: 0cm;" align="left"><font
 face="monospace">java
-jar z88.jar</font></p>
<p style="margin-bottom: 0cm;" align="left">If you get a "command
not found" or similar error, then you need to configure you PATH
environment variable with the location of the java executable. Please
refer to Sun's installation guide or other README files for your
favorite operating system.</p>
<p style="margin-bottom: 0cm;" align="left">We plan to get execution
made even simpler, using the Java WebStart mechanism. Then, it will
be a matter of clicking on the OZvm program icon on our web site and
a few moments later it will run on your desktop (if you've installed
Java V1.4 previously!).<br>
<br>
Running OZvm this way will boot a Z88
computer with 32K RAM, using the V4.0 (UK) ROM binary, which was the
latest (and greatest) version that a real Z88 was shipped with in
England around 1989. Important: Since the Z88 boots with an english
ROM, the english (UK) keyboard layout on your PC is necessary,
otherwise the Z88 won't be able to recognize all your keys on the PC
keyboard. If you're using another keyboard layout (especially
french!), you need to change the layout in your operating system,
before getting a sensible input to the Z88.<br>
<br>
There's plenty of
command line options available that you can use, for example enable
OZvm in debugging mode (single step through the boot process!),
insert more RAM into the machine and preload it with Application
Cards or File Cards (that conveniently have been stored in .EPR
files). Most of these command line options can be selected from the
program menu as well.</p>
<p style="margin-bottom: 0cm;" align="left"><br>
</p>
<p style="margin-bottom: 0cm;" align="left"><a name="PC_Keyboard"></a><font
 style="font-size: 13pt;" size="3"><b>PC
keyboard access in Z88</b></font></p>
<p style="margin-bottom: 0cm;" align="left">The most important part!
Without it, no Z88 interaction. To make life even easier when typing
on the Z88 keyboard, we've mapped advanced keys like PC PageUp and
PageDown, which doesn't exist on the Z88. Here's the list of PC
control keys that are mapped to the Z88 keyboard:</p>
<p style="margin-bottom: 0cm;" align="left"><br>
</p>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
  <col width="80*"> <col width="176*"> <tbody>
    <tr valign="top">
      <td width="31%">
      <p><b>PC Key:</b></p>
      </td>
      <td width="69%">
      <p><b>Z88 Keyboard:</b></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p><br>
      </p>
      </td>
      <td width="69%">
      <p><br>
      </p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>F1</b></font></font></font></p>
      </td>
      <td width="69%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>HELP</b></font></font></font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>F2</b></font></font></font></p>
      </td>
      <td width="69%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>INDEX</b></font></font></font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>F3</b></font></font></font></p>
      </td>
      <td width="69%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>MENU</b></font></font></font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>F5</b></font></font></font></p>
      </td>
      <td width="69%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>Stop Z88 execution (only in debug mode is active)</b></font></font></font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>F6</b></font></font></font></p>
      </td>
      <td width="69%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>Dump Z88 screen to file (PNG format)</b></font></font></font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>F12</b></font></font></font></p>
      </td>
      <td width="69%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>Toggle keyboard focus between Z88 screen and debug command
line (only when debug mode is active)</b></font></font></font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>CTRL</b></font></font></font></p>
      </td>
      <td width="69%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>DIAMOND</b></font></font></font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p><font color="#3f5fbf"><font face="Courier"><font size="3"><b>ALT</b></font></font></font></p>
      </td>
      <td width="69%">
      <p><font color="#3f5fbf"><font face="Courier"><font size="3"><b>SQUARE</b></font></font></font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>HOME</b></font></font></font></p>
      </td>
      <td width="69%">
      <p align="left"><font face="Courier"><font size="3"><b><font
 color="#3f5fbf">SHIFT</font> <font color="#3f5fbf">LeftArrow</font></b></font></font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p><font color="#3f5fbf"><font face="Courier"><font size="3"><b>END</b></font></font></font></p>
      </td>
      <td width="69%">
      <p><font face="Courier"><font size="3"><b><font color="#3f5fbf">SHIFT</font>
      <font color="#3f5fbf">RightArrow</font></b></font></font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font face="Courier"><font size="3"><b><font
 color="#3f5fbf">PAGE</font> <font color="#3f5fbf">UP</font></b></font></font></p>
      </td>
      <td width="69%">
      <p align="left"><font face="Courier"><font size="3"><b><font
 color="#3f5fbf">SHIFT</font> <font color="#3f5fbf">UpArrow</font></b></font></font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font face="Courier"><font size="3"><b><font
 color="#3f5fbf">PAGE</font> <font color="#3f5fbf">DOWN</font></b></font></font></p>
      </td>
      <td width="69%">
      <p align="left"><font face="Courier"><font size="3"><b><font
 color="#3f5fbf">SHIFT</font> <font color="#3f5fbf">DownArrow</font></b></font></font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>INSERT</b></font></font></font></p>
      </td>
      <td width="69%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>DIAMOND V (PipeDream / Diary shortcut)</b></font></font></font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>DELETE</b></font></font></font></p>
      </td>
      <td width="69%">
      <p align="left"><font face="Courier"><font size="3"><b><font
 color="#3f5fbf">SHIFT</font> <font color="#3f5fbf">BackSpace</font></b></font></font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><b><font size="3"><font face="Courier"><font
 color="#3f5fbf">NUM0 - NUM9</font></font></font></b></p>
      </td>
      <td width="69%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>0 &#8211; 9 (useful on a french Z88 keyboard!)</b></font></font></font></p>
      </td>
    </tr>
  </tbody>
</table>
<p style="margin-bottom: 0cm;" align="left">Another issue with keyboard
access is that the Z88 has been implemented in several different
localized versions for France, Germany, Denmark, Norway, Sweden,
Finland, Spain, Turkey, etc. All these localizations exists on
individual ROM's. Running one of those in OZvm is no problem. OZvm
emulates the Z88 hardware and therefore they work. However, each of
those ROM's have different keyboard scanning routines that handles
ISO characters and &#8221;dead keys&#8221;. Each ROM is not defined
with a country code inside the watermark of the ROM header. You need
to specify the keyboard layout that this ROM uses. Therefore, you
cannot completely use your english / american PC keyboard layout on a
Z88 running inside OZvm that expects input from a french keyboard
layout. </p>
<p style="margin-bottom: 0cm;" align="left">Firstly, you have to
specify
the keyboard layout at the command line, if you're going to use a
&#8221;foreign&#8221; Z88 ROM (also specified at the command line).
Secondly, you need to activate similar keyboard layout in your
operating system. For example, if you as an english user want to play
with a french Z88 ROM, you need to specify the following at the
command line:</p>
<p style="margin-left: 1.13cm; margin-bottom: 0cm;" align="left"><font
 face="monospace">java
-jar z88.jar &lt;filename of french ROM&gt; kbl fr</font></p>
<p style="margin-bottom: 0cm;" align="left">Finally, you need to change
to a french keyboard layout on your PC. Yes, it's very cumbersome,
but it's the only way. Using this method will enable an almost
one-to-one key mapping between the &#8221;host&#8221; keyboard and
the Z88 keyboard.</p>
<p style="margin-bottom: 0cm;" align="left">OZvm will in a later
version
be implemented with a graphical keyboard below the screen where you
will be able to use the mouse to click on the various (button) keys,
combined with the feature to select another keyboard layout in the
menu. This feature will display the correct keyboard layout according
to the selected localization. This will be very useful for key
combinations that may be hard to replicate through the keyboard
mapping emulation.</p>
<p style="margin-bottom: 0cm;" align="left">OZvm has implemented
several
(but not all) country specific keyboard layout mappings between the
PC and the Z88: english/american (default), french, danish and
swedish/finnish. If you need another keyboard mapping, send us an
email to our development mailing list:
<a href="mailto:z88-development@lists.sourceforge.net">z88-development@lists.sourceforge.net</a>.
</p>
<p style="margin-bottom: 0cm;" align="left"><br>
</p>
<p style="margin-bottom: 0cm;" align="left"><a name="Cmdline_options"></a><font
 style="font-size: 13pt;" size="3"><b>Command line options</b></font></p>
<p style="margin-bottom: 0cm;" align="left">Currently, there's no menu
selection in the Graphical User Interface. All features are specified
using command line options at your operating system shell. This is
the general syntax for executing OZvm:</p>
<p style="margin-left: 1.13cm; margin-bottom: 0cm;" align="left"><font
 face="monospace">java
-jar z88.jar [&lt;ROM-filename&gt;] [&lt;options&gt;]</font></p>
<p style="margin-bottom: 0cm;" align="left">the following options are
available (all specified in lower case!):</p>
<p style="margin-bottom: 0cm;" align="left"><br>
</p>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
  <col width="80*"> <col width="176*"> <tbody>
    <tr valign="top">
      <td width="31%">
      <p><b>Option:</b></p>
      </td>
      <td width="69%">
      <p><b>Function:</b></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p><br>
      </p>
      </td>
      <td width="69%">
      <p><br>
      </p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><b><font size="3"><font face="Courier"><font
 color="#3f5fbf">debug</font></font></font></b></p>
      </td>
      <td width="69%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>Enable debugging mode in OZvm</b></font></font></font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><br>
      </p>
      </td>
      <td width="69%">
      <p align="left"><br>
      </p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>kbl &lt;country code&gt;</b></font></font></font></p>
      </td>
      <td width="69%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>Use country specific Z88 keyboard layout. Available codes
are: fr (french), dk (danish), uk | en (english), se (swedish), fi
(finnish)</b></font></font></font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><br>
      </p>
      </td>
      <td width="69%">
      <p align="left"><br>
      </p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>ramX &lt;size&gt; </b></font></font></font> </p>
      </td>
      <td width="69%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>Specify a RAM card in slot X (0-3) of size in KB, for
example: ram1 128 means that a 128K RAM Card will be inserted into slot
1.</b></font></font></font></p>
      </td>
    </tr>
    <tr>
      <td><br>
      </td>
      <td><br>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>eprX &lt;size&gt; &lt;type&gt;</b></font></font></font> </p>
      </td>
      <td width="69%"> <><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>Specify an EPROM card in slot X (1-3) of size in KB and
of&nbsp; &lt;type&gt;, for
example: epr1 1024 29f means that a 1Mb Amd Flash Card will be inserted
into slot
1.<br>
      </b></font></font></font></> <font color="#3f5fbf"><font
 face="Courier"><font size="3"><b>Available
types:<br>
27C: Standard UV Eprom (all sizes allowed)
      </b></font></font></font>
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>28F: Intel Flash Card (available sizes are 512 &amp; 1024)</b></font></font></font></p>
      <font color="#3f5fbf"><font face="Courier"><font size="3"><b> </b></font></font></font>
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b><font color="#3f5fbf"><font face="Courier"><font size="3"><b>29F</b></font></font></font><font
 color="#3f5fbf"><font face="Courier"><font size="3"><b>: Amd Flash
Card (available sizes are
128, 512 &amp; 1024)</b></font></font></font></b></font></font></font></p>
      <font color="#3f5fbf"><font face="Courier"><font size="3"><b> </b></font></font></font></td>
    </tr>
    <tr>
      <td><br>
      </td>
      <td><br>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>sX &lt;Card filename&gt;</b></font></font></font></p>
      </td>
      <td width="69%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>Specify an Eprom (or Flash) Card in slot X (1-3), for
example: s2 spellmaster.epr</b></font></font></font></p>
      <p align="left"><b><font size="3"><font face="Courier"><font
 color="#3f5fbf">The spellmaster.epr is an example of a filename. You
decide the naming format. The file must contain a replicated binary
image of the original card.</font></font></font></b></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><br>
      </p>
      </td>
      <td width="69%">
      <p align="left"><br>
      </p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>initdebug &lt;filename&gt;</b></font></font></font></p>
      </td>
      <td width="69%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>Enable debugging mode in OZvm and parse debugging commands
from &lt;filename&gt;. Each debug command on a separate line. This
allows you to preset the debugging environment with breakpoints,
registers and possibly an autostart of Z80 execution engine.</b></font></font></font></p>
      </td>
    </tr>
  </tbody>
</table>
<p style="margin-bottom: 0cm;" align="left"><br>
</p>
<p style="margin-bottom: 0cm;" align="left"><a name="Debugging_mode"></a><font
 style="font-size: 13pt;" size="3"><b>Debugging mode</b></font></p>
<p style="margin-bottom: 0cm;" align="left">If you specified the
debugging mode at the command line, you automatically get some extra
windows in OZvm. The small window at the bottom (just the size of a
single line of text) is the OZvm debug command line. Here, you will
find the blinking cursor (or caret), ready for input (just after OZvm
has been started from host operating command line (eg. MSDOS shell or
UNIX shell). The large window in the middle (between the Z88 screen
and the debug command line), is for text output of debug commands.</p>
<p style="margin-bottom: 0cm;" align="left">When you start OZvm in
debug
mode, the Z88 ROM isn't automatically booted. You will see a grey
screen (switched off -state). The OZvm environment has everything
loaded and initialized, ready to be executed. At this stage, you're
actually able to set monitoring breakpoints and other stuff, before
letting OZvm run the code.</p>
<p style="margin-bottom: 0cm;" align="left">The debug mode is also
available when the Z88 is being executed. That means that you can
monitor execution by looking at Z80 registers, viewing memory, and
disassemble Z80 instructions while the Z88 is running. At all times
you can switch keyboard focus between the OZvm debug command line and
the Z88 screen input by pressing the F12 key. When the Z88 screen has
input focus (all keyboard input from your PC keyboard gets typed in
the Z88), you can press F5 to halt Z80 the processor at any time (or
use the 'stop' command in the debug command line) . A small message
will be displayed in the Runtime Messages Window. Input focus has
already been transferred to the debug command line with a blinking
cursor. </p>
<p style="margin-bottom: 0cm;" align="left">The debug command line also
supplies a command history. Just press the &lt;UP&gt; arrow key get
the the previous command. You can also use the &lt;Up&gt; or
&lt;Down&gt;
arrow keys to browse the command history. Just press ENTER at the
command, you wish to re-execute.</p>
<p style="margin-bottom: 0cm;" align="left">When specifying an address
for the various commands that needs an address, you can either use
the local 64K address range, eg. 0000h &#8211; FFFFh, or use extended
addressing that enables you to get access to the full 4MB memory
range of the Z88. An extended address is first specified with a bank
number (00h &#8211; FFh), followed by the 16K bank offset (full 64K
absolute address may be used as well), eg 203800 (bank 20h, offset
3800h). You may use a segment mask in the bank offset; it makes it
easier to read in various output but is otherwise ignored by the
command line.<br>
</p>
<p style="margin-bottom: 0cm;" align="left">The following debug and
register commands are available (debug commands are lowe case,
register commands upper case):</p>
<p style="margin-bottom: 0cm;" align="left"><br>
</p>
<table border="0" cellpadding="0" cellspacing="0" width="100%">
  <col width="80*"> <col width="176*"> <tbody>
    <tr valign="top">
      <td width="31%">
      <p><b>Command:</b></p>
      </td>
      <td width="69%">
      <p><b>Function:</b></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p><br>
      </p>
      </td>
      <td width="69%">
      <p><br>
      </p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><b><font size="3"><font face="Courier"><font
 color="#3f5fbf">run</font></font></font></b></p>
      </td>
      <td width="69%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>Execute Z88 from PC register</b></font></font></font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><br>
      </p>
      </td>
      <td width="69%">
      <p align="left"><br>
      </p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>stop</b></font></font></font></p>
      </td>
      <td width="69%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>Stop currently running Z88 (or press F5 when Z88 window
has focus)</b></font></font></font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><br>
      </p>
      </td>
      <td width="69%">
      <p align="left"><br>
      </p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>z</b></font></font></font></p>
      </td>
      <td width="69%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>Run z88 machine and break at next instruction</b></font></font></font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><br>
      </p>
      </td>
      <td width="69%">
      <p align="left"><br>
      </p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>.</b></font></font></font></p>
      </td>
      <td width="69%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>Single step instruction at PC register</b></font></font></font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><br>
      </p>
      </td>
      <td width="69%">
      <p align="left"><br>
      </p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>d [&lt;address&gt;]</b></font></font></font></p>
      </td>
      <td width="69%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>Disassemble at default PC register (if no address),
otherwise at specified address</b></font></font></font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><br>
      </p>
      </td>
      <td width="69%">
      <p align="left"><br>
      </p>
      </td>
    </tr>
    <tr>
      <td><font color="#3f5fbf"><font face="Courier"><font size="3"><b>ldc
filename [&lt;address&gt;]</b></font></font></font></td>
      <td>l<font color="#3f5fbf"><font face="Courier"><font size="3"><b>Load
code from file into bank address. The file image must fit within the
bank boundary.<br>
      </b></font></font></font></td>
    </tr>
    <tr>
      <td><br>
      </td>
      <td><br>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><b><font size="3"><font face="Courier"><font
 color="#3f5fbf">wb</font></font></font></b> <b><font size="3"><font
 face="Courier"><font color="#3f5fbf">&lt;ext.address&gt; &lt;byte&gt;
[&lt;byte&gt;]</font></font></font></b></p>
      </td>
      <td width="69%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>Write a single or several byte(s) to memory at address</b></font></font></font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><br>
      </p>
      </td>
      <td width="69%">
      <p align="left"><br>
      </p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>m [&lt;address&gt;]</b></font></font></font></p>
      </td>
      <td width="69%">
      <p align="left"><b><font size="3"><font face="Courier"><font
 color="#3f5fbf">View memory at default PC register (if no address),
otherwise at specified address</font></font></font></b></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><br>
      </p>
      </td>
      <td width="69%">
      <p align="left"><br>
      </p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>bp [&lt;address&gt;]</b></font></font></font></p>
      </td>
      <td width="69%">
      <p align="left"><b><font size="3"><font face="Courier"><font
 color="#3f5fbf">List breakpoints (if no address), otherwise toggle
stop breakpoint at specified address</font></font></font></b></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><br>
      </p>
      </td>
      <td width="69%">
      <p align="left"><br>
      </p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>bpd [&lt;address&gt;]</b></font></font></font></p>
      </td>
      <td width="69%">
      <p align="left"><b><font size="3"><font face="Courier"><font
 color="#3f5fbf">List breakpoints (if no address), otherwise toggle
dump breakpoint at specified address</font></font></font></b></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><br>
      </p>
      </td>
      <td width="69%">
      <p align="left"><br>
      </p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>bl</b></font></font></font></p>
      </td>
      <td width="69%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>Display Blink register contents</b></font></font></font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><br>
      </p>
      </td>
      <td width="69%">
      <p align="left"><br>
      </p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>sr</b></font></font></font></p>
      </td>
      <td width="69%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>Display Blink Segment Register Bank Binding</b></font></font></font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><br>
      </p>
      </td>
      <td width="69%">
      <p align="left"><br>
      </p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>r</b></font></font></font></p>
      </td>
      <td width="69%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>Display current Z80 registers</b></font></font></font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><br>
      </p>
      </td>
      <td width="69%">
      <p align="left"><br>
      </p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>f/F</b></font></font></font></p>
      </td>
      <td width="69%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>Display current Z80 flag register</b></font></font></font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><br>
      </p>
      </td>
      <td width="69%">
      <p align="left"><br>
      </p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>cls</b></font></font></font></p>
      </td>
      <td width="69%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>Clear debug command out window</b></font></font></font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><br>
      </p>
      </td>
      <td width="69%">
      <p align="left"><br>
      </p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>BC DE HL IX IY SP PC[&lt;address&gt;]</b></font></font></font></p>
      </td>
      <td width="69%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>Display or set 16bit registers, eg HL 40CC (set register)</b></font></font></font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>A B C D E H L [&lt;byte&gt;]</b></font></font></font></p>
      </td>
      <td width="69%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>Display or set 8bit registers, eg B 40 (set register) </b></font></font></font>
      </p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>BC' DE' HL' [&lt;address&gt;]</b></font></font></font></p>
      </td>
      <td width="69%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>Display or set 16bit alternate registers</b></font></font></font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>A' B' C' D' E' H' L' [&lt;byte&gt;]</b></font></font></font></p>
      </td>
      <td width="69%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>Display or set 8bit alternate registers</b></font></font></font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>FZ, FC, FN, FS, FPV, FH [1 | 0]</b></font></font></font></p>
      </td>
      <td width="69%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>Display or set flag, eg. FZ 1 enables Zero flag.</b></font></font></font></p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><br>
      </p>
      </td>
      <td width="69%">
      <p align="left"><br>
      </p>
      </td>
    </tr>
    <tr valign="top">
      <td width="31%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>exit </b></font></font></font> </p>
      </td>
      <td width="69%">
      <p align="left"><font color="#3f5fbf"><font face="Courier"><font
 size="3"><b>End OZvm application (or close window with mouse)</b></font></font></font></p>
      </td>
    </tr>
  </tbody>
</table>
<p style="margin-bottom: 0cm;" align="left"><br>
</p>
<p style="margin-bottom: 0cm;" align="left"><a name="Features"></a><font
 style="font-size: 13pt;" size="3"><b>Upcoming
features in future releases</b></font></p>
<ul>
  <li>
    <p style="margin-bottom: 0cm;" align="left">Ability to save and
later restore the current state of OZvm (Processor registers, contents
of Ram and inserted cards in external slots)</p>
  </li>
  <li>
    <p style="margin-bottom: 0cm;" align="left">Interactive
insertion/removal of File Cards and Application Cards, using a menu
command.</p>
  </li>
  <li>
    <p style="margin-bottom: 0cm;" align="left">More debugging commands
that accesses the OZ static data structures: application card info
(entry, type, MTH), ROM DOR's, File DOR's, File Cards.</p>
  </li>
  <li>
    <p style="margin-bottom: 0cm;" align="left">Tool to build
Application Card and File Card Eproms. This will be the functionally
equivalent of Garry Lancasters &#8221;RomCombiner&#8221;.</p>
  </li>
</ul>
<p style="margin-bottom: 0cm;" align="left"><br>
</p>
<p style="margin-bottom: 0cm;" align="left"><a name="Not_working"></a><font
 style="font-size: 13pt;" size="3"><b>What's
not working (yet) in OZvm</b></font></p>
<p style="margin-bottom: 0cm;" align="left">The
following list are the missing functionalities, inadequacies and bugs
for OZvm <b><i>V0.3.6</i></b>:</p>
<ul>
  <li>
    <p style="margin-bottom: 0cm;" align="left">The Square key on Z88
doesn't always work when running OZvm on Windows. This is not a bug,
but a side-effect, since the ALT key (that is being used for emulating
the Square key on the Z88) triggers the Window menu. Try press the Down
Arrow Key immediately after an ALT key press (and release) &#8211; you will
see a pop-up menu where you can move or resize the window with the
keyboard. This problem only happens when you single-press the ALT key,
and then want to press a letter (a key shortcut to activate an
application). The shortcut always works in OZvm with keeping the ALT
key down, then pressing the letter of the shortcut.</p>
  </li>
  <li>
    <p style="margin-bottom: 0cm;" align="left">The keyboard emulation
cannot always press a certain key combination that the Z88 needs. Often
is this the case when you PC keyboard uses another country-specific
layout than what the OZvm expects (ie. using a french PC keyboard
layout in Microsoft Windows and running OZvm with Z88 english V4.0 ROM
code that only understands an english/american keyboard layout). Always
use a keyboard layout on your PC that matches the keyboard layout of
the Z88. We will implement a keyboard below the OZvm screen where you
can press those special keys using the mouse to click on the &#8221;key&#8221;
buttons.</p>
  </li>
  <li>
    <p style="margin-bottom: 0cm;" align="left">There's no submenus in
main File or Help entries. Sorry, it's still an alpha release. There's
going to be plenty of Gui features available in future releases.</p>
  </li>
  <li>
    <p style="margin-bottom: 0cm;" align="left">The timeout feature of
OZ doesn't work. In other words, whatever the Panel settings are (from
1 minute onwards), the Z88 doesn't automatically switch off. High
priority.</p>
  </li>
  <li>
    <p style="margin-bottom: 0cm;" align="left">Alarm events never get
executed. No reason trying to set an alarm in the Alarm popdown. Also,
alarms doesn't automtically switch the Z88 on when previously
(manually) switched off. High priority.</p>
  </li>
  <li>
    <p style="margin-bottom: 0cm;" align="left">OZvm doesn't apparently
switch the Z88 properly off. When having pressed both SHIFT keys to
turn the Z88 off (at least switch the &#8221;screen&#8221; off), the active screen
flickers occasionally through the switched-off screen. However, you can
easily turn the machine on again with both SHIFT keys. High priority.</p>
  </li>
  <li>
    <p style="margin-bottom: 0cm;" align="left">Eprom Programming
Hardware is not yet emulated. So you cannot &#8221;blow&#8221; files to a 32K, 128K
or 256K File Eprom yet in the slot 3. Medium priority.</p>
  </li>
  <li>
    <p style="margin-bottom: 0cm;" align="left">Flash Eprom Programming
Hardware is not yet emulated for Rakewell's 1Mb Flash Cards. Trying to
execute the FlashStore utility will only give you a warning that a
Flash Eprom is not available in slot 3. You will also notice warning
messages in the Runtime Window that the particular Z80 hardware I/O
port hasn't been implemented yet. Medium priority.</p>
  </li>
  <li>
    <p style="margin-bottom: 0cm;" align="left">Serial Port emulation
is not implemented yet. There's lots of possibilies to use this feature
to communicate with the outside world (the PC). Therefore you cannot
use applications that use the serial port; the inbuilt VT52 terminal,
Ranger's terminal programs &amp; External Disk application, PC Link,
EazyLink. You will also notice warning messages in the Runtime Window
that the particular port hasn't been implemented yet.</p>
  </li>
  <li>
    <p style="margin-bottom: 0cm;" align="left">The Z88 is too fast to
play this game!!! Ahh, even the Java engine is faster than the original
Z88! You must be having one of those X Ghz monster computers! A feature
to get the original speed of the Z88 running 3.2768 Mhz will be
implemented to properly slow down so everybody can follow what's going
on! Low priority.</p>
  </li>
  <li>
    <p style="margin-bottom: 0cm;" align="left">Sound has not been
implemented yet. Though the Z88 has a primitive &#8221;beeper&#8221;, we'll add it
to make a complete emulation. Low priority.</p>
  </li>
</ul>
</body>
</html>
